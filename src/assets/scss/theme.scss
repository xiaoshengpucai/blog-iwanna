/* 全局主题变量定义 */

/* 默认亮色主题变量 */
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f6f8fa;
  --text-primary: #24292e;
  --text-secondary: #586069;
  --border-color: #e1e4e8;
  --accent-color: #0366d6;
  --highlight-color: #ea4aaa;
  --shadow-color: rgba(0, 0, 0, 0.1);
  --shadow-hover: rgba(0, 0, 0, 0.15);
}

/* 全局暗色主题样式 */
.dark-theme {
  --bg-primary: #0d1117;
  --bg-secondary: #161b22;
  --text-primary: #c9d1d9;
  --text-secondary: #8b949e;
  --border-color: #30363d;
  --accent-color: #58a6ff;
  --highlight-color: #f08804;
  --shadow-color: rgba(0, 0, 0, 0.3);
  --shadow-hover: rgba(0, 0, 0, 0.4);
}

/* 全局背景和文本颜色 - 无论亮暗主题都应用 */
html, 
body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  margin: 0;
  padding: 0;
  min-height: 100vh;
  width: 100%;
}

/* 平滑的主题过渡效果 */
:root, .dark-theme {
  transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
              color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 为所有主要屏幕区域统一应用主题背景 */
.secondScreen, 
.threeScreen, 
.main-content, 
.firstScreen {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

/* 清除其他可能的背景色干扰 */
* {
  box-sizing: border-box;
  background-color: inherit;
}

/* 确保内容区域不受影响，只继承背景色不重置其他样式 */
div, section, article, header, footer, nav {
  background-color: inherit;
  color: inherit;
}

/* 为first-screen设置文本颜色，保留其特殊背景 */
.dark-theme .first-screen {
  color: var(--text-primary);
}

/* 为first-screen的图片添加更自然的暗色主题滤镜效果 */
.dark-theme .first-screen .image-container img {
  filter: saturate(0.6) brightness(0.9);
  transition: filter 0.5s ease;
}

/* 确保所有文本元素在暗色主题下都有合适的颜色 */
.dark-theme h1, .dark-theme h2, .dark-theme h3, 
.dark-theme h4, .dark-theme h5, .dark-theme h6,
.dark-theme p, .dark-theme span, .dark-theme div {
  color: var(--text-primary);
  transition: color 0.5s ease;
}

/* 为first-screen中的特定文本元素设置颜色 */
.dark-theme .first-header,
.dark-theme .image-grid,
.dark-theme .profile,
.dark-theme .projects,
.dark-theme .locations {
  color: var(--text-primary);
}

/* 优化暗色主题下的导航栏样式 */
.dark-theme .navi {
  background: rgba(30, 30, 30, 0.9) !important;
  border-color: rgba(255, 255, 255, 0.15) !important;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4), 
              0 8px 48px rgba(0, 0, 0, 0.3),
              inset 0 0 0 1px rgba(255, 255, 255, 0.1), 
              inset 0 1px 2px rgba(255, 255, 255, 0.05);
  transition: all 0.5s ease;
}

/* 增强暗色主题下的标题样式 */
.dark-theme .title {
  color: #e6edf3;
  text-shadow: 0.1em 0.1em 0.1em rgba(90, 140, 210, 0.61), 
               0 0 2px rgba(255, 255, 255, 0.3),
               -1px -1px 0 #1a1a1a,
               1px -1px 0 #1a1a1a,
               -1px 1px 0 #1a1a1a,
               1px 1px 0 #1a1a1a;
  transition: all 0.5s ease;
}

/* 优化暗色主题下的故障效果 */
.dark-theme .glitch-overlay {
  background: linear-gradient(90deg, rgba(255, 80, 80, 0.15) 0%, transparent 5%),
              linear-gradient(90deg, transparent 95%, rgba(80, 200, 255, 0.15) 100%);
  transition: background 0.5s ease;
}

/* 通用过渡效果类 */
.theme-transition {
  transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
              color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s ease;
}

/* 主题切换按钮的增强样式 */
.navi-logo.theme {
  transition: transform 0.3s ease, filter 0.3s ease;
}

.navi-logo.theme:hover {
  transform: scale(1.1) rotate(5deg);
}

/* 暗色主题激活状态的动画效果 */
.navi-logo.theme.dark-mode-active {
  filter: brightness(1.3) hue-rotate(180deg);
  animation: themeTogglePulse 0.6s ease-out;
}

@keyframes themeTogglePulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
  100% {
    transform: scale(1);
  }
}